<h1 id="-span-style-color-009688-m02-uf2-span-"><span style="color:#009688">M02 UF2</span></h1>
<h2 id="-span-style-color-4dd0e1-lenguaje-sql-span-"><span style="color:#4dd0e1">LENGUAJE SQL</span></h2>
<p>Las sentencias de bases de datos se pueden agrupar en:</p>
<ul>
    <li><p>[ ] <span style="color:#009688">DDL</span> (<span style="color:#4dd0e1">Data Definition Language</span>): DefiniciÃ³n de la estructura de almacenamiento de datos. Create, drop, alterâ€¦</p>
    </li>
    <li><p>[ ] <span style="color:#009688">DML</span> (<span style="color:#4dd0e1">Data Manipulation Language</span>): Consulta y modificaciÃ³n de datos. Select, Insert, update, deleteâ€¦</p>
    </li>
    <li><p>[ ] <span style="color:#009688">DCL</span> (<span style="color:#4dd0e1">Data Control Language</span>): administra el acceso a los datos. Grant, revokeâ€¦</p>
    </li>
</ul>
<h3 id="ordenes-span-style-color-009688-ddl-span-sobre-base-de-datos">Ordenes <span style="color:#009688">DDL</span> sobre base de datos</h3>
<p>Para crear una base de datos se realiza con la orden <code>CREATE DATABASE</code> aunque <code>CREATE SCHEMA</code> es sinÃ³nima, es decir que harÃ¡ lo mismo</p>
<pre><code><span class="hljs-keyword">CREATE</span> <span class="hljs-keyword">DATABASE</span> NOMBRE_SCHEMA
</code></pre><p>Con la orden <code>DROP [DATABASE | SCHEMA]</code> borramos una base de datos</p>
<pre><code><span class="hljs-keyword">DROP</span> <span class="hljs-keyword">DATABASE</span> NOMBRE_SCHEMA
</code></pre><h3 id="sintaxis-de-span-style-color-009688-create-table-span-crear-tabla-">Sintaxis de <span style="color:#009688">CREATE TABLE</span> (crear tabla)</h3>
<pre><code>CREATE <span class="hljs-keyword">TABLE</span> nombre_tabla <span class="hljs-comment">(</span>
    nombre_columna tipocolumna [restricciones_columna],
    [nombre_columna tipocolumna [restricciones_columna], ]
    [restricciones_tabla]
);
</code></pre><p>Donde las <span style="color:#4dd0e1">restricciones_columna</span> pueden ser:</p>
<ul>
    <li><span style="color:#009688">PRIMARY KEY</span> ðŸ¡ª Especifica que esta columna es clave primaria.
        NOTA: Una clave primaria puede contener hasta 16 columnas.<ul>
            <li>No puede haber mÃ¡s de una clave primaria por tabla.</li>
            <li>Las columnas que la definen deben ser NOT NULL. (Se hace por defecto).</li>
        </ul>
    </li>
    <li><span style="color:#009688">FOREING KEY</span> ðŸ¡ª Permite establecer una clave en esta tabla con la clave primaria de otra.</li>
    <li><span style="color:#009688">NOT NULL</span> ðŸ¡ª Especifica que la columna debe recibir un valor en la creaciÃ³n o la modificaciÃ³n. La propiedad not null no se admite en el ALTER TABLE.</li>
    <li><span style="color:#009688">NULL</span> ðŸ¡ª Especifica que la columna puede tomar valores null.</li>
    <li><span style="color:#009688">DEFAULT</span> ðŸ¡ª Fuerza un valor para este campo si no existe.</li>
    <li><span style="color:#009688">AUTO_INCREMENT</span> ðŸ¡ª Propiedad aplicada Ãºnicamente a columna numÃ©rica entera y permite que el sistema genera automÃ¡ticamente los nÃºmeros de manera incremental.</li>
    <li><span style="color:#009688">UNIQUE</span> ðŸ¡ª Permite asignar un valor Ãºnico a un campo, por lo que todos los valores son diferentes en esa columna. Puede haber varias por tabla.</li>
    <li><span style="color:#009688">CHECK</span> ðŸ¡ª Especifica una comprobaciÃ³n en el valor de esta columna. </li>
</ul>
<h3 id="ejemplo">Ejemplo</h3>
<pre><code class="lang-roomsql">    <span class="hljs-keyword">CREATE</span> <span class="hljs-keyword">TABLE</span> PROFESOR (
        <span class="hljs-keyword">ID</span> <span class="hljs-built_in">INT</span> <span class="hljs-keyword">NOT</span> <span class="hljs-literal">NULL</span> PRIMARY <span class="hljs-keyword">KEY</span> AUTO_INCREMENT,
        NOMBRE <span class="hljs-built_in">VARCHAR</span>(<span class="hljs-number">100</span>) <span class="hljs-keyword">NOT</span> <span class="hljs-literal">NULL</span>,
        APELLIDO <span class="hljs-built_in">VARCHAR</span>(<span class="hljs-number">100</span>) <span class="hljs-literal">NULL</span>,
        EDAD <span class="hljs-built_in">DATE</span> <span class="hljs-keyword">NOT</span> <span class="hljs-literal">NULL</span>,
        PROVINCIA <span class="hljs-built_in">VARCHAR</span>(<span class="hljs-number">100</span>) <span class="hljs-keyword">DEFAULT</span> <span class="hljs-string">'Barcelona'</span>,
        SUELDO <span class="hljs-built_in">INT</span> <span class="hljs-keyword">CHECK</span>(&gt; <span class="hljs-number">5000</span>),
        ASIGNATURA <span class="hljs-built_in">VARCHAR</span>(<span class="hljs-number">100</span>) <span class="hljs-keyword">UNIQUE</span>,
    ) AUTO_INCREMENT = <span class="hljs-number">1000</span>;
</code></pre>
<ul>
    <li>Si no especifico el <span style="color:#6aa84f">AUTO_INCREMENT</span> empieza en 1.</li>
    <li>Un Ãºnico <span style="color:#6aa84f">AUTO_INCREMENT</span> por tabla y siempre en la <span style="color:#4dd0e1">Primary Key</span>.</li>
</ul>
<h3 id="ejemplo">Ejemplo</h3>
<pre><code class="lang-roomsql">    create table usuario(
        numero int auto_increment,
        documento char(<span class="hljs-number">8</span>),
        nombre varchar(<span class="hljs-number">30</span>),
        estudios <span class="hljs-class"><span class="hljs-keyword">enum</span>('<span class="hljs-title">ninguno</span>','<span class="hljs-title">primario</span>','<span class="hljs-title">secundario</span>','<span class="hljs-title">universitario</span>'),</span>
        primary key (numero)
    )
</code></pre>
<ul>
    <li>Forma exclusiva de MySql para crear la <span style="color:#4dd0e1">Primary Key</span>.</li>
</ul>
<h3 id="-span-style-color-6aa84f-constraints-span-"><span style="color:#6aa84f">CONSTRAINTS</span></h3>
<pre><code>CREATE <span class="hljs-keyword">TABLE</span> nombre_tabla <span class="hljs-comment">(</span>
    nombre_columna tipocolumna [restricciones_columna],
    [nombre_columna tipocolumna [restricciones_columna], ]
    [restricciones_tabla]
);
</code></pre><p>Podemos, del mismo modo, crear restricciones <span style="color:#6aa84f">(CONSTRAINTS)</span> al final de la especificaciÃ³n de tablas (<span style="color:#4dd0e1">restricciones_tabla</span>) con los comandos:</p>
<ul>
    <li><span style="color:#6aa84f">CONSTRAINT</span> nombrerestriccion <span style="color:#009688">DEFAULT</span> valor FOR nombrecolumna</li>
    <li><span style="color:#6aa84f">CONSTRAINT</span> nombrerestriccion <span style="color:#009688">PRIMARY KEY</span> (nombrecolumna1,....)<ul>
        <li>NOTA: Es la Ãºnica manera de hacer una clave primaria compuesta.</li>
    </ul>
    </li>
    <li><span style="color:#6aa84f">CONSTRAINT</span> nombrerestriccion <span style="color:#009688">UNIQUE</span> (nombrecolumna1, ...)</li>
    <li><span style="color:#6aa84f">CONSTRAINT</span> FK_ nombrerest <span style="color:#009688">FOREIGN KEY</span> (nombrecol) <span style="color:#009688">REFERENCES</span> NombreTabla (columnaId)<ul>
        <li>NOTA: Es la Ãºnica manera de hacer una clave foranea.</li>
    </ul>
    </li>
</ul>
<h3 id="ejemplo">Ejemplo</h3>
<pre><code class="lang-roomsql">    <span class="hljs-keyword">CREATE</span> <span class="hljs-keyword">TABLE</span> PROFESOR (
        <span class="hljs-keyword">ID</span> <span class="hljs-built_in">INT</span> <span class="hljs-keyword">NOT</span> <span class="hljs-literal">NULL</span> AUTO_INCREMENT,
        NOMBRE <span class="hljs-built_in">VARCHAR</span>(<span class="hljs-number">100</span>),
        APELLIDO <span class="hljs-built_in">VARCHAR</span>(<span class="hljs-number">100</span>),
        EDAD <span class="hljs-built_in">DATE</span>,
        PROVINCIA <span class="hljs-built_in">VARCHAR</span>(<span class="hljs-number">100</span>),
        SUELDO <span class="hljs-built_in">INT</span>,
        ID_ASIGNATURA <span class="hljs-built_in">VARCHAR</span>(<span class="hljs-number">100</span>),
        <span class="hljs-keyword">CONSTRAINT</span> PK_PROFESOR PRIMARY <span class="hljs-keyword">KEY</span> (<span class="hljs-keyword">ID</span>),
        <span class="hljs-keyword">CONSTRAINT</span> UNIQUE_PROFESOR_ASIGNATURA <span class="hljs-keyword">UNIQUE</span> (NOMBRE),
        <span class="hljs-keyword">CONSTRAINT</span> PROVINCIA_DEFAULT <span class="hljs-keyword">DEFAULT</span> <span class="hljs-string">'Barcelona'</span> <span class="hljs-keyword">FOR</span> PROVINCIA,
        <span class="hljs-keyword">CONSTRAINT</span> FK_PROFESOR_ASIGNATURA FOREIGN <span class="hljs-keyword">KEY</span> (ID_ASIGNATURA) <span class="hljs-keyword">REFERENCES</span> ASINTATURAS (<span class="hljs-keyword">ID</span>)
    );
</code></pre>
<h2 id="-span-style-color-009688-actividad-1-span-"><span style="color:#009688">Actividad 1</span></h2>
<p>Dadas las tablas, <span style="color:#4dd0e1">CLIENTES</span> y <span style="color:#4dd0e1">FACTURAS</span>, crea un script para cada una de ellas:</p>
<pre><code>CLIENTES
CIF (<span class="hljs-name">PK</span>)
Nombre (<span class="hljs-name">no</span> nulo)
Direccion
Poblacion (<span class="hljs-name">default</span> â€˜Barcelonaâ€™)
Web
Correo
</code></pre><hr>
<pre><code>FACTURAS
Idfactura (<span class="hljs-name">PK</span> - autoincremental empieza en <span class="hljs-number">100</span> y no nula)
Fechafactura
Total (<span class="hljs-name">n</span>Ãºmero con dos decimales)
Iva (<span class="hljs-name">check</span> de mÃ­nimo <span class="hljs-number">21</span>)
Descuento (<span class="hljs-name">Permite</span> nulos)
CIF (<span class="hljs-name">FK</span> CLIENTE)
</code></pre><details>
    <summary><span style="color:#6aa84f;font-size:150%">SoluciÃ³n</span></summary>

    <code>roomsql
        CREATE TABLE CLIENTES (
        CIF char(9) primary key auto_increment,
        nombre varchar(30) not null,
        direccion varchar(100),
        poblacion varchar(100) default &#39;Barcelona&#39;,
        web varchar(60),
        correo varchar(40)
        );

        CREATE TABLE facturas (
        Idfactura int auto_increment primary key not null,
        Fechafactura date,
        total decimal(10,2),
        iva decimal(10,2),
        descuento decimal(10,2) check(&gt;20) null,
        CIF char(9) ,
        constraint fk_clientes_facturas foreign key(CIF) references clientes(CIF)
        ) auto_increment = 100;</code>
</details>

<h2 id="-span-style-color-009688-actividad-2-span-"><span style="color:#009688">Actividad 2</span></h2>
<p>Ahora ejecuta el script en la base de datos.</p>
<hr>
